<!doctype html>
<html itemscope itemtype="http://schema.org/Product" lang="en-US" prefix="og: http://ogp.me/ns#"><!--<![endif]-->
<head>
    <title>THE BIG MAC INDEX</title>
    <link rel="icon" href="http://nellas.se/chalmers/infoviz/bilder/icon.jpg">
    
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"           content="width=700">
    <meta name="keywords"           content="ScrollMagic, scrolling, animation, Superscrollorama, Scrollorama, scroll, interaction, animation, sticky, pinning, parallax">
    <meta name="description"        content="ScrollMagic - The javascript library for magical scroll interactions.
                                             ScrollMagic helps you to easily react to the user's current scroll position.">
    <meta name="author"             content="Jan Paepke (www.janpaepke.de)">
    <meta name="designer"           content="Jan Paepke (www.janpaepke.de)">
    <meta property="fb:admins"      content="595418934">
    <meta property="og:type"        content="website">
    <meta property="og:url"         content="http://scrollmagic.io/">
    <meta property="og:image"       content="http://scrollmagic.io/img/demo_fb_preview.jpg">
    <meta property="og:title"       content="ScrollMagic">
    <meta property="og:description" content="The javascript library for magical scroll interactions. ScrollMagic helps you to easily react to the user's current scroll position.">


    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic|Roboto+Condensed:400,300,700">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/demo.css">

    <script src="js/lib/greensock/TweenMax.min.js"></script>
    <script src="js/lib/greensock/plugins/ScrollToPlugin.min.js"></script>
    <script src="js/lib/jquery.min.js"></script>
    <script src="js/lib/modernizr.custom.min.js"></script>
    <script src="js/lib/iscroll-probe.js"></script>
    <script src="scrollmagic/minified/ScrollMagic.min.js"></script>
    <script src="scrollmagic/minified/plugins/animation.gsap.min.js"></script>
    <script src="scrollmagic/minified/plugins/debug.addIndicators.min.js"></script>
    <script src="js/demo.js"></script>

</head>

<style>
/* WORLD MAP */
  .names {
  fill: none;
  stroke: #ffffff;
  stroke-linejoin: round;
  }

    /* Tooltip CSS */
    .d3-tip {
    line-height: 1.5;
    font-weight: 400;
    font-family:"avenir next", Arial, sans-serif;
    padding: 6px;
    background: rgba(0, 0, 0, 0.6);
    color: #FFA500;
    border-radius: 1px;
    pointer-events: none;
    }

    /* Creates a small triangle extender for the tooltip */
    .d3-tip:after {      
      box-sizing: border-box;
      display: inline;
      font-size: 8px;
      width: 100%;
      line-height: 1.5;
      color: rgba(0, 0, 0, 0.6);
      position: absolute;
      pointer-events: none;
      
    }

    /* Northward tooltips */
    .d3-tip.n:after {
      content: "\25BC";
      margin: -1px 0 0 0;
      top: 100%;
      left: 0;
      text-align: center;
    }

    /* Eastward tooltips */
    .d3-tip.e:after {
      content: "\25C0";
      margin: -4px 0 0 0;
      top: 50%;
      left: -8px;
    }

    /* Southward tooltips */
    .d3-tip.s:after {
      content: "\25B2";
      margin: 0 0 1px 0;
      top: -8px;
      left: 0;
      text-align: center;
    }

    /* Westward tooltips */
    .d3-tip.w:after {
      content: "\25B6";
      margin: -4px 0 0 -1px;
      top: 50%;
      left: 100%;
    }

/*    text{
      pointer-events:none;
    }*/

    .details{
      color:white;
    }

</style>
<style>
/* BAR CHART */

.bar {
  fill: #ffc300;
}

.bar:hover {
  fill: #ffffff;
}

.axis--x path {
  display: none;
}

</style>


<!-- ÄNDRA STYLE I DEMO.CSS och example.css-->


<body>
<!-- *********************1st page (Dancing Burger)*********************-->
<h4 class="groupMembers">Group 9:Lin Lin, Signe Livgard, Hannah Miklin, Daniella Röhss</h4>
    <div class="section" id="magicBurger">
      <div id="left">
         <div id="content-wrapper">
        <span id="overlay"></span>
        <script>
            var controller;
                // detect if mobile browser. regex -> http://detectmobilebrowsers.com
                var isMobile = (function(a){return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);

            if (isMobile) {
                var myScroll;
                $(document).ready(function () {
                    // wrap for iscroll
                    $("#content-wrapper")
                        .addClass("scrollContainer")
                        .wrapInner('<div class="scrollContent"></div>');

                    // add iScroll
                    myScroll = new IScroll('#content-wrapper', {scrollX: false, scrollY: true, scrollbars: true, useTransform: false, useTransition: false, probeType: 3, click: true});

                    // update container on scroll
                    myScroll.on("scroll", function () {
                        controller.update();
                    });

                    // overwrite scroll position calculation to use child's offset instead of parents scrollTop();
                    controller.scrollPos(function () {
                        return -myScroll.y;
                    });

                    // refresh height, so all is included.
                    setTimeout(function () {
                        myScroll.refresh();
                    }, 0);

                    // manual set hight (so height 100% is available within scroll container)
                    $(document).on("orientationchange", function () {
                        $("section")
                            .css("min-height", $(window).height())
                            .parent(".scrollmagic-pin-spacer").css("min-height", $(window).height());
                    });
                    $(document).trigger("orientationchange"); // trigger to init
                });
                // init the controller
                controller = new ScrollMagic.Controller({
                    container: "#content-wrapper",
                    globalSceneOptions: {
                        triggerHook: "onLeave"
                    }
                });
            } else {
                // init the controller
                controller = new ScrollMagic.Controller({
                    globalSceneOptions: {
                        triggerHook: "onLeave"
                    }
                });
            }
            $(function () {
                // set current version in cdn link(s)
                var cdnLinks = [
                    "cdnjs.cloudflare.com/ajax/libs/ScrollMagic/%version%/ScrollMagic.min.js",
                    "cdnjs.cloudflare.com/ajax/libs/ScrollMagic/%version%/plugins/debug.addIndicators.min.js",
                ];
                var cdnCode = cdnLinks.map(function(link) {
                    return '<script src="//' + link.replace(/%version%/gim, ScrollMagic.version) + '"></script' + '>';
                }).join("\n");

                $("<pre>").text(cdnCode).appendTo("#get-it-now code.cdn");
            });

        </script>
        <section id="start">
            <div id="intro">
                <h1>Big Mac</h1>
                <img class="tophat" src="http://nellas.se/chalmers/infoviz/bilder/burgare.png">
                <img class="wand" src="img/demo_wand.png">
                <div class="sparkpoint"></div>
               
            </div>
            <script>
                // wrap each title letter
                $("#start h1").wrapEach(/(.)/g, "<span>$1</span>");

                // animations
                var nervousHat = new TimelineMax({repeat: -1, yoyo: true})
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "+=5", left: "-=6", rotation: -3}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "-=10", left: "+=6", rotation: 0}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "+=5", left: "+=6", rotation: 3}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "-=5", left: "-=3", rotation: 1.5}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "+=5", left: "-=6", rotation: -1.5}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "+=5", left: "+=3", rotation: 0}))
                    .add(TweenMax.to("#start .tophat", 0.3, {bottom: "-=10"}));
                var abracadabra = TweenMax.fromTo("#start .wand", 1, {top: -$(window).height()/3, left: 370, rotation: 20}, {top: 10, rotation: -20});
                var reveal = new TimelineMax()
                    .add([
                            TweenMax.to("#start .tophat", 1, {bottom: $(window).height(), left: "-=50", rotation: -20}),
                            TweenMax.from("#start h1", 1, {scale: 0.2, top: "+=70"}),
                            TweenMax.to("#start .wand", 0.8, {top: -$(window).height()/3, left: 450, rotation: 30}),
                            TweenMax.to("#start .floor", 1, {autoAlpha: 0})
                        ]);
                var laola = new TimelineMax()
                    .add(TweenMax.staggerTo("#start h1 span", 0.5, {top: -150, x: -75, scale: 2, color: '#ff4468' }, 0.2))
                    .add(TweenMax.staggerTo("#start h1 span", 0.5, {top: 0, x: 0, scale: 1, color: '#fff'}, 0.2), 0.5);

                // container pin
                var startpin = new ScrollMagic.Scene({
                        duration: 700
                    })
                    .setPin("section#start")
                    .addTo(controller);

                // msg scroll ani
                new ScrollMagic.Scene({
                        duration: 140,
                        offset: -100
                    })
                    .setTween(TweenMax.to("#msg div.scroll", 1, {backgroundPosition: "0 13px", repeat: -1, delay: 1, repeatDelay: 2, ease: Linear.easeNone}))
                    .addTo(controller);
                // msg hide
                new ScrollMagic.Scene({
                        offset: 40
                    })
                    .setTween(TweenMax.to("#msg", 0.5, {bottom: -40}))
                    .addTo(controller);

                // hat movement
                new ScrollMagic.Scene({
                        duration: 300,
                        offset: -100
                    })
                    .setTween(nervousHat)
                    .addTo(controller);

                // magic wand
                new ScrollMagic.Scene({
                        offset: 20,
                        duration: 180
                    })
                    .on("end", function (e) {
                        if (e.scrollDirection == "FORWARD" && startpin.progress() < 0.37) { // check pin progress so it doesnt launch on refresh
                            // make it rain!
                            $("#start .sparkpoint").sparkle({
                                amount: 40,
                                duration: 0.2
                            });
                        }
                    })
                    .setTween(abracadabra)
                    .addTo(controller);

                // big reveal
                new ScrollMagic.Scene({
                        duration: 300,
                        offset: 260
                    })
                    .setTween(reveal)
                    .addTo(controller);

                // jumping text
                new ScrollMagic.Scene({
                        duration: 200,
                        offset: 450
                    })
                    .setTween(laola)
                    .addTo(controller);

            </script>
            
        </section>


       
    </div>
    </div>
     
   </div>

<!-- ******************2nd page (Info page with burger)*****************-->
    <div class="section" id="box2">
    
       <div id="infoRed"></div>
       <div id="infobox1"> 
            <h4>Some info about the burger</h4>
            <p>Year 1967, a woman named Esther Glickstein Rose worked at McDonald’s advertising department. She was asked by an executive to nominate a name for the new, mysterious burger. The nomination “Big Mac” was first met by laughter, but was later the winning name. For many years McDonald’s refused to acknowledge her for this contribution, but she was later thanked for her role in naming the burger. She got a thank you message and a plaque etched with the Big Mac burger and fries.
            </p>
       </div>
       <div id="infoRed"> </div>
       <div id="infobox2"> 
            <h4>More info about the burger</h4>
            <p>Year 1967, a woman named Esther Glickstein Rose worked at McDonald’s advertising department. She was asked by an executive to nominate a name for the new, mysterious burger. The nomination “Big Mac” was first met by laughter, but was later the winning name. For many years McDonald’s refused to acknowledge her for this contribution, but she was later thanked for her role in naming the burger. She got a thank you message and a plaque etched with the Big Mac burger and fries.
            </p>
        </div>
        
   </div>
   
<!-- ******************3rd page (Info page with burger)*****************-->
    <div class="section" id="box3">
       <div id="left2"><div id="wrapper">  
   
            <div id="bun_top" class="containers">
        <div class="overlays">
            <h5>Top Bun</h5>
            <h6>Calories: 60kcal</h6>
        </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/bun_top.png" width="100%">
    </div>
    
            <div id="meat_top" class="containers">
        <div class="overlays">
            <h5>Meat</h5>
            <h6>Calories: 92kcal</h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/meat_top.png" width="100%">
    </div> 
   
            <div id="dressing_top" class="containers">
         <div class="overlays">
            <h5>Dressing</h5>
            <h6>Calories: 50kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/dressing_top.png" width="100%">
    </div> 
    
            <div id="sallad_top" class="containers">
        <div class="overlays">
            <h5>Sallad</h5>
            <h6>Calories: 2kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/sallad_top.png" width="100%">
    </div> 

            <div id="bun_middle" class="containers">
        <div class="overlays">
            <h5>Bun</h5>
            <h6>Calories: 60kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/bun_middle.png" width="100%">
    </div> 
    
            <div id="meat_top" class="containers">
       <div class="overlays">
            <h5>Meat</h5>
            <h6>Calories: 92kcal</h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/meat_top.png" width="100%">
    </div> 
    
            <div id="cheese" class="containers">
        <div class="overlays">
            <h5>Cheese</h5>
            <h6>Calories: 42kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/cheese.png" width="100%">
    </div> 
     
            <div id="sallad_bottom" class="containers">
         <div class="overlays">
            <h5>Sallad</h5>
            <h6>Calories: 2kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/sallad_bottom.png" width="100%">
    </div> 
    
            <div id="dressing_bottom" class="containers">
         <div class="overlays">
            <h5>Dressing</h5>
            <h6>Calories: 50kcal</h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/dressing_bottom.png" width="100%">
    </div> 
    
             <div id="bun_bottom" class="containers">
         <div class="overlays">
            <h5>Bun</h5>
            <h6>Calories: 60kcal </h6>
         </div>
        <img src="http://nellas.se/chalmers/infoviz/bilder/bun_bottom.png" width="100%">
    </div> 


        </div> </div>
        <div id="infobox2"> 
            <h4>Add text? Or move burger to middle</h4>
            <p>Year 1967, a woman named Esther Glickstein Rose worked at McDonald’s advertising department. She was asked by an executive to nominate a name for the new, mysterious burger. The nomination “Big Mac” was first met by laughter, but was later the winning name. For many years McDonald’s refused to acknowledge her for this contribution, but she was later thanked for her role in naming the burger. She got a thank you message and a plaque etched with the Big Mac burger and fries.
            </p>
        </div>
       
   </div>
   
<!-- ******************page 34 between page 3&4 (Salary barchart)*****************-->   
    <div class="section" id="box34">
        <h4>Compared with SALARY, how expensive are the BIG MACs?</h4>
        <div id="salaryChart"></div>
        <script src="//d3js.org/d3.v3.min.js"></script>
         <script>

// Setting up your vars for defining the boundaries of this chart + margins
var margin = {top: 30, right: 40, bottom: 80, left: 40},
  width = 1150 - margin.left - margin.right,
  height = 380 - margin.top - margin.bottom;

// X axis scale is defined by the length of the array divided by the width of the chart
// second parametere (.2) defines distance between
var x0 = d3.scale.ordinal()
  .rangeRoundBands([0, width], .2);

var x1 = d3.scale.ordinal();

// Y axis scale is defined by a linear scale, max being the height of the chart.
var y = d3.scale.linear()
  .range([height, 0]);

var color = d3.scale.ordinal()
  .range(["#e74c3c", "#ffc300", "#f1c40f", "#3498db"]); //<-- Red, Green, Yellow, Blue

  
  
  
  
var xAxis = d3.svg.axis()
  .scale(x0)
  .tickSize(10,0)
  .orient("bottom");

// additional features, like its alignment and tickFormat
var yAxisLeft = d3.svg.axis()
  .scale(y)
  .orient("left")
  .tickSize(7,0)
  .tickFormat(d3.format(".2s"));

// Another Y Axis for Mr. Simmon
var yAxisRight = d3.svg.axis()
  .scale(y)
  .orient("right")
  .tickSize(7,0)
  .tickFormat(d3.format(".2s"));

//  This is defining a var (svg) that will draw our div at this current box
var svg = d3.select("#salaryChart").append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .attr("class", "chart")
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var sortedXvalues = {};

// We load our data
d3.csv("pokemans2.csv", function(error, data) {
  if (error) throw error;
  data.sort(function(a,b) {
    return d3.descending(a.Salary*0.2, b.Salary*0.2); //<-- By default we sort by Type
  });


// Types out Red, Blue, Green, and Average data from each Object
  var Stats_names = d3.keys(data[0])
    .filter(function(key) { return key != "Pokemon" && key != "Type" && key != "Generation" });

  console.log(Stats_names);
// Adds to our CSV the RGB value where name is equal to name and the value is the color's value
  data.forEach(function(d) {
    d.Stats = Stats_names.map(function(name) { return {name: name, value: +d[name]}; });
  });

  x0.domain(data.map(function(d) { return d.Pokemon; }));
  x1.domain(Stats_names).rangeRoundBands([0, x0.rangeBand()]);
  y.domain([0, d3.max(data, function(d) { return d3.max(d.Stats, function(d) { return d.value; }); })]);

  

  var TypeCount = d3.nest()
    .key(function(d) { return d.Type; })
    .rollup(function(v) { return v.length; })
    .entries(data);

  var pokemon = svg.selectAll(".pokemon")
    .data(data);

  pokemon.enter()
    .append("g")
    .attr("class", "pokemon")
    .attr("transform", function(d) { return "translate(" + x0(d.Pokemon) + ",0)"; });

  var columnBars = pokemon.selectAll("rect")
    .data(function(d) { return d.Stats; });

  var sortSelec
  tion = svg.selectAll(".type")
  
    .data(data);
  


//Type name either Generation or Type type



//Draws a rectangle
  columnBars.enter().append("rect")
    .attr("width", x1.rangeBand())
    .attr("x", function(d) { return x1(d.name); })
    .attr("y", function(d) { return y(d.value); })
    .attr("height", function(d) { return height - y(d.value); })
    .style("fill", function(d) { return color(d.name); })
  
 
  
    .on("mouseover", function(d) {
    d3.select(this)
      .style("fill","white")
    
      d3.select("#tooltip")
        .style("left", width - 220 + "px")
        .style("top", "1000px")

    
        .select("#value")
        .text(d.name + ' = ' + d.value + ' $');
      //Show the tooltip
      d3.select("#tooltip").classed("hidden", false);
    })
    .on("mouseout", function() {
    d3.select(this)
    .style("fill", function(d) { return color(d.name); })
    //Hide the tooltip
      d3.select("#tooltip").classed("hidden", true);
    });

  svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
  .style("fill","white")
    .call(xAxis);
  
 	d3.selectAll("text")
	    .attr("y", 8)
	    .attr("x", 4)
	    .attr("dy", "0.4em")
    	.attr("transform", "rotate(45)")
	    .style("text-anchor", "start")
.style("fill","white")

  
  
  
// Labels your y axis and formats it
  svg.append("g")
    .attr("class", "y axis")
    .call(yAxisLeft)
  .style("fill","#898989")
  .style("text-anchor", "start")
   
   ;

 
 	d3.selectAll("text")
	  
	    
	    .style("text-anchor", "start")
  
  
  
  
 var legend = svg.append("g")
  .attr("class", "legend")
  .attr("x", 65)
  .attr("y", 25)
  .attr("height", 100)
  .attr("width", 100);

legend.append("rect")
  .attr("x", width - 185)
  .attr("y", 20)
  .attr("width", 10)
  .attr("height", 10)
  .style("fill","#e74c3c");
  
  legend.append("rect")
  .attr("x", width - 185)
  .attr("y", 40)
  .attr("width", 10)
  .attr("height", 10)
  .style("fill","#ffc300");

legend.append("text")
   .attr("x", width - 165)
  .attr("y", 50)
  .attr("width", 10)
  .attr("height", 10)
   .style("font-size", 12)
    .style("text-transform", "uppercase")
    .style("opacity", .8)
  .style("fill","white")
  .text("monthly salary");
  
  legend.append("text")
   .attr("x", width - 165)
  .attr("y", 30)
  .attr("width", 10)
  .attr("height", 10)
     .style("font-size", 12)
    .style("text-transform", "uppercase")
    .style("opacity", .8)
  .style("fill","white")
  .text("Big Mac Index * 200");
  
  
  

  d3.selectAll("#sort-by-controls input[name=mode]")
    .on("change", function() {
      var Mode = this.value;
      d3.csv("pokemans.csv", function(error, data) {
        if (error) throw error;
        data.sort(function(a,b) {
          console.log('sort', a, b);
          return d3.descending(a[Mode], b[Mode]);
        });
        data.forEach(function(d) {
          d.Stats = Stats_names.map(function(name) { return {name: name, value: +d[name]}; });
        });
        x0.domain(data.map(function(d) { return d.Pokemon; }));
        pokemon.transition().duration(1000).attr("class", "pokemon")
          .attr("transform", function(d) { return "translate(" + x0(d.Pokemon) + ",0)"; });
        svg.selectAll(".x").filter(".axis")
          .transition().duration(1000)
        
    
          .attr("transform", "translate(9," + height*0.98 + ")")
          .call(xAxis);
        
        	d3.selectAll("text")
 
	    
    	
        .style("text-anchor", "start")

        sortSelection.transition().duration(1000)
          .attr("class", "type")

          .attr("text-anchor", "start")

          .attr("transform", function(d) { return "translate(" + (x0(d.Pokemon) + margin.right) + "," + (height + margin.bottom/1.9) + ")"; })
          .text(function(d) {
              if (!!sortedXvalues[d[Mode]]) {
                sortedXvalues[d[Mode]]++
              }
              else {
                sortedXvalues[d[Mode]] = 1;
                return d[Mode];
              }
          });

        columnBars.transition().duration(1000)
          .attr("width", x1.rangeBand())
          .attr("x", function(d) { return x1(d.name); })
          .attr("y", function(d) { return y(d.value); })
          .attr("height", function(d) { return height - y(d.value); })
          .style("fill", function(d) { return color(d.name); });
        });
    });
});
  

</script>

        <h4>Sort by:</h4>
        <div id="sort-by-controls">
  <input type="radio" name="mode" value="HP" id="HP" checked><label for="`clickedHP`"> Salary</label>
  <input type="radio" name="mode" value="Speed" id="Speed"><label for="clickedSpeed"> BMI*200  </label>
  <input type="radio" name="mode" value="Gap" id="Gap"><label for="clickedSpeed"> Gaps Between Them </label>
</div>
        
    </div>

<!-- ******************4th page (Map page)*****************-->
    <div class="section" id="box4">
        <h1>The big mac index</h1>
          <div id="left4">
            
            <h4>What is the big mac index?</h4>
            <p>The Big Mac index was invented by The Economist in 1986 as a lighthearted guide to whether currencies are at their “correct” level. It is based on the theory of purchasing-power parity (PPP), the notion that in the long run exchange rates should move towards the rate that would equalise the prices of an i dentical basket of goods and services (in this case, a burger) in any two countries. For example, the average price of a Big Mac in America in January 2018 was $5.28; in China it was only $3.17 at market exchange rates. So the "raw" Big Mac index says that the yuan was undervalued by 40% at that time.The Purchasing Power Parity (PPP). The Big Mac Index is a way to measure the Purchasing Power Parity (PPP) between two currencies. The PPP is often used by travellers to get an indication of a country’s living costs. B y using the PPP, people can estimate what the exchange rate would be between two currencies.


            </p>
        </div> 
        
          <div id="right4" class="right4">
               <script src="http://d3js.org/d3.v4.min.js"></script>
                <script src="http://d3js.org/queue.v1.min.js"></script>
                <script src="http://d3js.org/topojson.v1.min.js"></script>
                <script src="d3-tip.js"></script>
    
                <svg id="mapBox" width="80%" height="400"></svg>
                <script>
    var format = d3.format(",");

    // Set tooltips
    var tip = d3.tip()
                .attr('class', 'd3-tip')
                .offset([-10, 0])
                .html(function(d) {
                  return "<strong>Country: </strong><span class='details'>" + d.properties.name + "<br></span>" + "<strong>Price: </strong><span class='details'>" + format(d.population) +"</span> $";
                })

    var margin = {top: 0, right: 0, bottom: 0, left: 0},
                width = 700 - margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;

    var color = d3.scaleThreshold()
        .domain([0,1,2,2.5,3,3.5,4,4.5,5,6])
        .range(["rgb(255,255,255)", 
                "rgb(255,243,204)", 
                "rgb(255,237,179)", 
                "rgb(255,231,153)", 
                "rgb(255,225,128)", 
                "rgb(255,219,102)",
                "rgb(255,213,77)",
                "rgb(255,207,51)",
                "rgb(255,201,26)",
                "rgb(255,195,0)"]);

    var path = d3.geoPath();

    var svg = d3.select("#mapBox")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append('g')
                .attr('class', 'map');

    var projection = d3.geoMercator()
                       .scale(130)
                      .translate( [width / 2, height / 1.5]);

    var path = d3.geoPath().projection(projection);

    svg.call(tip);

    queue()
        .defer(d3.json, "world_countries.json")
        .defer(d3.tsv, "world_population.tsv")
        .await(ready);

    function ready(error, data, population) {
      var populationById = {};

      population.forEach(function(d) { populationById[d.id] = +d.population; });
      data.features.forEach(function(d) { d.population = populationById[d.id] });

      svg.append("g")
          .attr("class", "countries")
        .selectAll("path")
          .data(data.features)
        .enter().append("path")
          .attr("d", path)
          .style("fill", function(d) { return color(populationById[d.id]); })
          .style('stroke', 'white')
          .style('stroke-width', 1.5)
          .style("opacity",0.8)
          // tooltips
            .style("stroke","white")
            .style('stroke-width', 0.3)
            .on('mouseover',function(d){
              tip.show(d);

              d3.select(this)
                .style("opacity", 1)
                .style("stroke","white")
                .style("stroke-width",3);
            })
            .on('mouseout', function(d){
              tip.hide(d);

              d3.select(this)
                .style("opacity", 0.8)
                .style("stroke","white")
                .style("stroke-width",0.3);
            });

      svg.append("path")
          .datum(topojson.mesh(data.features, function(a, b) { return a.id !== b.id; }))
           // .datum(topojson.mesh(data.features, function(a, b) { return a !== b; }))
          .attr("class", "names")
          .attr("d", path);
    }
    </script>
            </div>
    </div>

<!-- ******************5th page (Fries graph page*****************-->
    <div class="section" id="box5">
        <h1>Calories in the big mac</h1>
         <svg id="frieBox" width="960" height="500"></svg>
         <script>
var svg2 = d3.select("#frieBox"),
    margin = {top: 20, right: 20, bottom: 90, left: 40},
    width = +svg2.attr("width") - margin.left - margin.right,
    height = +svg2.attr("height") - margin.top - margin.bottom;

var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);

var g = svg2.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.tsv("data.tsv", function(d) {
  d.frequency = +d.frequency;
  return d;
}, function(error, data) {
  if (error) throw error;

  x.domain(data.map(function(d) { return d.letter; }));
  y.domain([330, 530]);
  /*y.domain([0, d3.max(data, function(d) { return d.frequency; })]);*/

  g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x))
      .selectAll("text")
      .style("text-anchor", "end")
      .attr("dx", "-.8em")
      .attr("dy", "-.55em")
      .attr("transform", "rotate(-45)" );

  /*g.append("image")
      .attr("xlink:href", "http://signii.no/chalmers/thebigmacindex/pics/frie.png")
      .attr("x", -8)
      .attr("y", -8)
      .attr("width", 50)
      .attr("height", 353);*/

 g.append("g")
      .attr("class", "axis axis--y")
      /*.call(d3.axisLeft(y).ticks(10, "%"))*/
      .call(d3.axisLeft(y))
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "0.71em")
      .attr("text-anchor", "end")
      .text("Calories");

  g.selectAll(".bar")
    .data(data)
    .enter().append("image")
      .attr("xlink:href", "http://signii.no/chalmers/thebigmacindex/pics/fries.png")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("y", function(d) { return y(d.frequency); })
      .attr("width", 20)
      .attr("height", function(d) { return height - y(d.frequency) ; });

});
</script>
        <div id="infobox3">Text explaining the graph</div>
    </div>

<!-- ******************page 6*****************-->   
    <div class="section" id="box6">
       <h1>The pickle dilemma</h1>
        <h4> The ever ongoing discussion wheter pickles in hamburgers <br />are "buu!" or "yay!" has finally reached a conclusion...</h4>
    
    <div id="pickleCenter">
    <div class="pickleBox">
      <img src="https://cdn.glitch.com/e0a0425b-f56c-457d-9118-5b8554c87664%2Fgurkhel.svg?151939151019697521';" class="agurk">
      <div class="middle">
      <div class="text">66% of people eat the pickles in their hamburgers! </div>
      </div>
    </div>
    </div>
        
    </div>
    
 
</body>
</html>
